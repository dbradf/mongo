name: evg_api
functions:
  "configure api credentials":
    description: Write credentials to access the evergreen API to a file consumable by script.
    actions:
      - command: shell.exec
        type: test
        params:
          shell: bash
          working_dir: src
          silent: true
          script: |
            # Create the Evergreen API credentials
            cat > .evergreen.yml <<END_OF_CREDS
            api_server_host: https://evergreen.mongodb.com/api
            api_key: "${evergreen_api_key}"
            user: "${evergreen_api_user}"
            END_OF_CREDS
